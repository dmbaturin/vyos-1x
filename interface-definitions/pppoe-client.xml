<?xml version="1.0"?>
<interfaceDefinition>
  <node name="interfaces">
    <children>
      <tagNode name="pppoe" owner="${vyos_conf_scripts_dir}/pppoe.py">
        <properties>
          <priority>320</priority> 
          <help>PPPoE interface settings</help>
        </properties>
        <children>
          <node name="authentication">
            <properties>
              <help>Authentication settings</help>
            </properties>
            <children>
              <leafNode name="user">
                <properties>
                  <help>User name</help>
                </properties>
              </leafNode>
              <leafNode name="password">
                <properties>
                  <help>Password</help>
                </properties>
              </leafNode>
            </children>
          </node>
          <leafNode name="access-concentrator">
            <properties>
              <help>Access concentrator name (only connect to this concentrator)</help>
            </properties>
          </leafNode>
          <leafNode name="connect-on-demand">
            <properties>
              <help>Connect only when traffic is sent</help>
            </properties>
          </leafNode>
          <leafNode name="default-route">
            <properties>
              <help>Default route insertion behaviour (default: auto)</help>
              <completionHelp>
                <list>auto none force</list>
              </completionHelp>
              <constraint>
                <regex>(auto|none|force)</regex>
              </constraint>
              <constraintErrorMessage>PPPoE default-route option must be "auto", "none", or "force"</constraintErrorMessage>
              <valueHelp>
                <format>auto</format>
                <description>Automatically install a default route</description>
              </valueHelp>
              <valueHelp>
                <format>none</format>
                <description>Do not install a default route</description>
              </valueHelp>
              <valueHelp>
                <format>force</format>
                <description>Replace existing default route</description>
              </valueHelp>
            </properties>
          </leafNode>
          <leafNode name="disable">
            <properties>
              <help>Administratively disable this PPPoE connection</help>
            </properties>
          </leafNode>
          <leafNode name="enable-ipv6">
            <properties>
              <help>Activate IPv6 support on this connection</help>
            </properties>
          </leafNode>
          <leafNode name="idle-timeout">
            <properties>
              <help>Delay (in seconds) before disconnecting an idle session</help>
            </properties>
          </leafNode>
          <leafNode name="local-address">
            <properties>
              <help>Local IPv4 address of the PPP interface</help>
            </properties>
          </leafNode>
          <leafNode name="remote-address">
            <properties>
              <help>Remote address of the PPP interface</help>
            </properties>
          </leafNode>
          <leafNode name="mtu">
            <properties>
              <help>Maximum transmission unit size (default: 1492)</help>
              <constraint>
                <validator name="numeric" argument="--range 68-8992"/>
              </constraint>
            </properties>
          </leafNode>
          <leafNode name="no-peer-dns">
            <properties>
              <help>Do not use DNS servers provided by the peer</help>
            </properties>
          </leafNode>
          <leafNode name="service-name">
            <properties>
              <help>Service name (only connect to access concentrators advertising this)</help>
            </properties>
          </leafNode>
          <leafNode name="source-interface">
            <properties>
              <help>Source interface for this PPPoE connection</help>
              <completionHelp>
                <script>${vyos_completion_dir}/list_interfaces.py --broadcast</script>
              </completionHelp>
            </properties>
          </leafNode>
        </children>
      </tagNode>
    </children>
  </node>
</interfaceDefinition>
